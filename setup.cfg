[flake8]
exclude = .venv,.git,.tox,docs,venv,bin,lib,deps,build
doctests = True
max-line-length = 88
ignore =
    E501,
    W503,
    E203,
    D202,
    W504

[isort]
multi_line_output = 3
include_trailing_comma = True
force_grid_wrap = 0
use_parentheses = True
line_length = 88
indent = "    "
not_skip = __init__.py
force_sort_within_sections = true
sections = FUTURE,STDLIB,INBETWEENS,THIRDPARTY,FIRSTPARTY,LOCALFOLDER
default_section = THIRDPARTY
known_first_party = custom_components.govee
combine_as_imports = true

[mypy]
python_version = 3.12
platform = linux
show_column_numbers = True
follow_imports = normal
strict = True
warn_return_any = True
warn_unused_configs = True
disallow_untyped_defs = True
disallow_any_unimported = False
disallow_any_expr = False
disallow_any_decorated = False
disallow_any_explicit = False
disallow_subclassing_any = True
disallow_untyped_calls = True
disallow_incomplete_defs = True
check_untyped_defs = True
disallow_untyped_decorators = False
no_implicit_optional = True
warn_redundant_casts = True
warn_unused_ignores = True
warn_no_return = True
warn_unreachable = True
strict_optional = True
show_error_context = True
show_error_codes = True
pretty = True

[mypy-pytest.*]
ignore_missing_imports = True

[mypy-aiohttp.*]
ignore_missing_imports = True

[mypy-async_timeout.*]
ignore_missing_imports = True

[mypy-homeassistant.*]
ignore_missing_imports = True

[mypy-pytest_homeassistant_custom_component.*]
ignore_missing_imports = True

[mypy-tests.*]
ignore_errors = True

[tool:pytest]
asyncio_mode = auto
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*
addopts =
    --cov=custom_components.govee
    --cov-report=term-missing
    --cov-report=html:htmlcov
    --cov-report=xml:coverage.xml
    -v
    --strict-markers
    --strict-config
markers =
    unit: Unit tests that don't require Home Assistant
    integration: Integration tests with Home Assistant
    api: Tests for API client
    coordinator: Tests for data coordinator
    entity: Tests for entity implementations
    config_flow: Tests for configuration flow
    slow: Tests that take longer to run
norecursedirs = .git .tox build dist *.egg .venv
filterwarnings =
    error
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
